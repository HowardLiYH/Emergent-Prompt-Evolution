API key found (not displayed for security)
================================================================================
PRACTICAL VALUE TEST SUITE - ALL 19 TESTS
================================================================================
Started: 2026-01-14T19:29:33.553530
Using REAL Gemini API - All data is genuine
/Users/yuhaoli/code/MAS_For_Finance/emergent_prompt_evolution/v2/experiments/practical_value/test_runner.py:26: FutureWarning: 

All support for the `google.generativeai` package has ended. It will no longer be receiving 
updates or bug fixes. Please switch to the `google.genai` package as soon as possible.
See README for more details:

https://github.com/google-gemini/deprecated-generative-ai-python/blob/main/README.md

  import google.generativeai as genai

================================================================================
PHASE: Phase 1: Critical Foundation
================================================================================

>>> Running test_01_specialist_accuracy...
============================================================
TEST 1: Specialist Accuracy Advantage
============================================================

--- Seed 1/3 ---
Training CSE with 10 agents, 5 regimes, 30 generations
  Gen 10/30: Coverage = 100%
  Gen 20/30: Coverage = 100%
  Gen 30/30: Coverage = 100%

  Testing regime: math
    Specialist (Agent 3): 100.0%
    Generalist (Agent 6): 100.0%
    Advantage: +0.0%

  Testing regime: code
    Specialist (Agent 5): 100.0%
    Generalist (Agent 9): 100.0%
    Advantage: +0.0%

  Testing regime: reasoning
    Specialist (Agent 2): 90.0%
    Generalist (Agent 9): 90.0%
    Advantage: +0.0%

  Testing regime: knowledge
    Specialist (Agent 8): 90.0%
    Generalist (Agent 9): 90.0%
    Advantage: +0.0%

  Testing regime: creative
    Specialist (Agent 5): 90.0%
    Generalist (Agent 9): 90.0%
    Advantage: +0.0%

--- Seed 2/3 ---
Training CSE with 10 agents, 5 regimes, 30 generations
  Gen 10/30: Coverage = 100%
  Gen 20/30: Coverage = 100%
  Gen 30/30: Coverage = 100%

  Testing regime: math
    Specialist (Agent 3): 100.0%
    Generalist (Agent 6): 100.0%
    Advantage: +0.0%

  Testing regime: code
    Specialist (Agent 5): 100.0%
    Generalist (Agent 1): 100.0%
    Advantage: +0.0%

  Testing regime: reasoning
    Specialist (Agent 2): 90.0%
    Generalist (Agent 1): 90.0%
    Advantage: +0.0%

  Testing regime: knowledge
    Specialist (Agent 8): 90.0%
    Generalist (Agent 1): 90.0%
    Advantage: +0.0%

  Testing regime: creative
    Specialist (Agent 5): 90.0%
    Generalist (Agent 1): 90.0%
    Advantage: +0.0%

--- Seed 3/3 ---
Training CSE with 10 agents, 5 regimes, 30 generations
  Gen 10/30: Coverage = 100%
  Gen 20/30: Coverage = 100%
  Gen 30/30: Coverage = 100%

  Testing regime: math
    Specialist (Agent 3): 100.0%
    Generalist (Agent 6): 100.0%
    Advantage: +0.0%

  Testing regime: code
    Specialist (Agent 5): 100.0%
    Generalist (Agent 4): 100.0%
    Advantage: +0.0%

  Testing regime: reasoning
    Specialist (Agent 2): 90.0%
    Generalist (Agent 5): 90.0%
    Advantage: +0.0%

  Testing regime: knowledge
    Specialist (Agent 8): 90.0%
    Generalist (Agent 4): 90.0%
    Advantage: +0.0%

  Testing regime: creative
    Specialist (Agent 5): 90.0%
    Generalist (Agent 4): 90.0%
    Advantage: +0.0%

============================================================
AGGREGATED RESULTS
============================================================

math:
  Mean advantage: +0.0% ± 0.0%
  p-value: nan
  Specialist wins: NO

code:
  Mean advantage: +0.0% ± 0.0%
  p-value: nan
  Specialist wins: NO

reasoning:
  Mean advantage: +0.0% ± 0.0%
  p-value: nan
  Specialist wins: NO

knowledge:
  Mean advantage: +0.0% ± 0.0%
  p-value: nan
  Specialist wins: NO

creative:
  Mean advantage: +0.0% ± 0.0%
  p-value: nan
  Specialist wins: NO

============================================================
VERDICT
============================================================
Overall mean advantage: +0.0%
Regimes where specialist wins: 0/5

❌ TEST FAILED: Specialists do NOT consistently outperform generalists
   This is a CRITICAL failure - CSE may not have practical value
Result saved to /Users/yuhaoli/code/MAS_For_Finance/emergent_prompt_evolution/v2/experiments/practical_value/results/test_01_specialist_accuracy_20260114_193355.json

<<< test_01_specialist_accuracy: ❌ FAILED (261.3s)

>>> Running test_02_automatic_routing...
============================================================
TEST 2: Automatic Task Routing
============================================================

--- Seed 1/3 ---
  Router trained on 100 competition rounds
  Regime patterns learned: ['knowledge', 'reasoning', 'math', 'code', 'creative']
  math: 13.3% routing accuracy
  code: 66.7% routing accuracy
  reasoning: 20.0% routing accuracy
  knowledge: 73.3% routing accuracy
  creative: 13.3% routing accuracy

  Overall routing accuracy: 37.3%
  Random baseline: 20.0%
  Improvement over random: 1.9x

--- Seed 2/3 ---
  Router trained on 100 competition rounds
  Regime patterns learned: ['code', 'math', 'reasoning', 'creative', 'knowledge']
  math: 66.7% routing accuracy
  code: 66.7% routing accuracy
  reasoning: 13.3% routing accuracy
  knowledge: 66.7% routing accuracy
  creative: 13.3% routing accuracy

  Overall routing accuracy: 45.3%
  Random baseline: 20.0%
  Improvement over random: 2.3x

--- Seed 3/3 ---
  Router trained on 100 competition rounds
  Regime patterns learned: ['math', 'reasoning', 'creative', 'code', 'knowledge']
  math: 66.7% routing accuracy
  code: 66.7% routing accuracy
  reasoning: 20.0% routing accuracy
  knowledge: 66.7% routing accuracy
  creative: 26.7% routing accuracy

  Overall routing accuracy: 49.3%
  Random baseline: 20.0%
  Improvement over random: 2.5x

============================================================
AGGREGATED RESULTS
============================================================
Mean routing accuracy: 44.0% ± 5.0%
Random baseline: 20.0%
Improvement factor: 2.2x

============================================================
VERDICT
============================================================
❌ TEST FAILED: Router does not work well enough
   Only 44.0% accuracy (2.2x random)
Result saved to /Users/yuhaoli/code/MAS_For_Finance/emergent_prompt_evolution/v2/experiments/practical_value/results/test_02_automatic_routing_20260114_193355.json

<<< test_02_automatic_routing: ❌ FAILED (0.0s)

================================================================================
PHASE: Phase 2: Quick Wins
================================================================================

>>> Running test_07_parallel_training...
============================================================
TEST 7: Parallelizable Training
============================================================

--- Testing with 1 workers ---
  Wall clock: 21.89s
  Time per generation: 1.460s

--- Testing with 2 workers ---
  Wall clock: 13.52s
  Time per generation: 0.901s

--- Testing with 4 workers ---
  Wall clock: 7.37s
  Time per generation: 0.492s

--- Testing with 8 workers ---
  Wall clock: 6.76s
  Time per generation: 0.451s

============================================================
SPEEDUP ANALYSIS
============================================================
1 workers: 21.89s, speedup=1.00x, efficiency=100%
2 workers: 13.52s, speedup=1.62x, efficiency=81%
4 workers: 7.37s, speedup=2.97x, efficiency=74%
8 workers: 6.76s, speedup=3.24x, efficiency=40%

============================================================
VERDICT
============================================================
✅ TEST PASSED: Parallel training works!
   8 workers: 3.2x speedup, 40% efficiency
Result saved to /Users/yuhaoli/code/MAS_For_Finance/emergent_prompt_evolution/v2/experiments/practical_value/results/test_07_parallel_training_20260114_193445.json

<<< test_07_parallel_training: ✅ PASSED (49.5s)

>>> Running test_10_graceful_degradation...
============================================================
TEST 10: Graceful Degradation
============================================================

--- Seed 1/2 ---
Training CSE with 10 agents, 5 regimes, 30 generations
  Gen 10/30: Coverage = 100%
  Gen 20/30: Coverage = 100%
  Gen 30/30: Coverage = 100%

  Evaluating full system...
    math: 100.0%
    code: 100.0%
    reasoning: 90.0%
    knowledge: 90.0%
    creative: 90.0%

  Removed math specialist (Agent 3):
    Full: 100.0% → Reduced: 100.0%
    Degradation: +0.0%

  Removed code specialist (Agent 5):
    Full: 100.0% → Reduced: 100.0%
    Degradation: +0.0%

  Removed reasoning specialist (Agent 2):
    Full: 90.0% → Reduced: 90.0%
    Degradation: +0.0%

  Removed knowledge specialist (Agent 8):
    Full: 90.0% → Reduced: 90.0%
    Degradation: +0.0%

  Removed creative specialist (Agent 5):
    Full: 90.0% → Reduced: 90.0%
    Degradation: +0.0%

--- Seed 2/2 ---
Training CSE with 10 agents, 5 regimes, 30 generations
  Gen 10/30: Coverage = 100%
  Gen 20/30: Coverage = 100%
  Gen 30/30: Coverage = 100%

  Evaluating full system...
    math: 100.0%
    code: 100.0%
    reasoning: 90.0%
    knowledge: 90.0%
    creative: 90.0%

  Removed math specialist (Agent 3):
    Full: 100.0% → Reduced: 100.0%
    Degradation: +0.0%

  Removed code specialist (Agent 5):
    Full: 100.0% → Reduced: 100.0%
    Degradation: +0.0%

  Removed reasoning specialist (Agent 2):
    Full: 90.0% → Reduced: 90.0%
    Degradation: +0.0%

  Removed knowledge specialist (Agent 8):
    Full: 90.0% → Reduced: 90.0%
    Degradation: +0.0%

  Removed creative specialist (Agent 5):
    Full: 90.0% → Reduced: 90.0%
    Degradation: +0.0%

============================================================
AGGREGATED RESULTS
============================================================
math:
  Mean degradation: +0.0%
  Fallback quality: 100.0%
code:
  Mean degradation: +0.0%
  Fallback quality: 100.0%
reasoning:
  Mean degradation: +0.0%
  Fallback quality: 90.0%
knowledge:
  Mean degradation: +0.0%
  Fallback quality: 90.0%
creative:
  Mean degradation: +0.0%
  Fallback quality: 90.0%

============================================================
VERDICT
============================================================
Worst-case degradation: 0.0%
Minimum fallback quality: 90.0%

✅ TEST PASSED: System degrades gracefully!
Result saved to /Users/yuhaoli/code/MAS_For_Finance/emergent_prompt_evolution/v2/experiments/practical_value/results/test_10_graceful_degradation_20260114_193737.json

<<< test_10_graceful_degradation: ✅ PASSED (171.7s)

>>> Running test_14_collision_coverage...
============================================================
TEST 14: Collision-Free Coverage
============================================================

--- Seed 1/3 ---
Training CSE with 10 agents, 5 regimes, 40 generations
  Gen 10/40: Coverage = 100%
  Gen 20/40: Coverage = 100%
  Gen 30/40: Coverage = 100%
  Gen 40/40: Coverage = 100%

  Specialist distribution:
    knowledge: [0, 8] ⚠️ COLLISION
    code: [1] ✓
    reasoning: [2, 5] ⚠️ COLLISION
    math: [3, 4, 6, 9] ⚠️ COLLISION
    creative: [7] ✓

  Coverage: 100% (5/5)
  Collision rate: 60% (3 collisions)

--- Seed 2/3 ---
Training CSE with 10 agents, 5 regimes, 40 generations
  Gen 10/40: Coverage = 100%
  Gen 20/40: Coverage = 100%
  Gen 30/40: Coverage = 100%
  Gen 40/40: Coverage = 100%

  Specialist distribution:
    knowledge: [0, 8] ⚠️ COLLISION
    code: [1] ✓
    reasoning: [2, 5] ⚠️ COLLISION
    math: [3, 4, 6, 9] ⚠️ COLLISION
    creative: [7] ✓

  Coverage: 100% (5/5)
  Collision rate: 60% (3 collisions)

--- Seed 3/3 ---
Training CSE with 10 agents, 5 regimes, 40 generations
  Gen 10/40: Coverage = 100%
  Gen 20/40: Coverage = 100%
  Gen 30/40: Coverage = 100%
  Gen 40/40: Coverage = 100%

  Specialist distribution:
    knowledge: [0, 8] ⚠️ COLLISION
    code: [1] ✓
    reasoning: [2, 5] ⚠️ COLLISION
    math: [3, 4, 6, 9] ⚠️ COLLISION
    creative: [7] ✓

  Coverage: 100% (5/5)
  Collision rate: 60% (3 collisions)

============================================================
AGGREGATED RESULTS
============================================================
Mean coverage: 100%
Mean collision rate: 60%

============================================================
VERDICT
============================================================
❌ TEST FAILED: Coverage or collision issues
   100% coverage with 60% collision rate
Result saved to /Users/yuhaoli/code/MAS_For_Finance/emergent_prompt_evolution/v2/experiments/practical_value/results/test_14_collision_coverage_20260114_194017.json

<<< test_14_collision_coverage: ❌ FAILED (160.1s)

>>> Running test_17_inference_latency...
============================================================
TEST 17: Real-Time Inference Latency
============================================================

Training population...
Training CSE with 10 agents, 5 regimes, 30 generations
  Gen 10/30: Coverage = 100%
  Gen 20/30: Coverage = 100%
  Gen 30/30: Coverage = 100%

Measuring latency on 20 requests...
  Completed 10/20
  Completed 20/20

============================================================
LATENCY ANALYSIS
============================================================

CSE (Router + Specialist):
  P50: 490.6ms
  P95: 585.2ms
  P99: 630.1ms

Single Model:
  P50: 503.7ms
  P95: 613.6ms
  P99: 615.4ms

Routing Overhead:
  P50: 0.021ms
  P95: 0.051ms

Mean overhead: -17.4ms
Overhead ratio: 0.96x

============================================================
VERDICT
============================================================
✅ TEST PASSED: Inference latency is acceptable!
   Routing: 0.0ms, Overhead: 0.96x
Result saved to /Users/yuhaoli/code/MAS_For_Finance/emergent_prompt_evolution/v2/experiments/practical_value/results/test_17_inference_latency_20260114_194116.json

<<< test_17_inference_latency: ✅ PASSED (59.6s)

================================================================================
PHASE: Phase 3: Differentiation
================================================================================

>>> Running test_05_adaptability...
============================================================
TEST 5: Adaptability to New Regimes
============================================================

--- Seed 1/2 ---

  Phase 1: Training on original regimes...
Training CSE with 8 agents, 3 regimes, 20 generations
  Gen 10/20: Coverage = 100%
  Gen 20/20: Coverage = 100%

  Phase 2: Introducing 'knowledge' regime...

  New regime specialist: Agent 1
  New regime wins: 2
  Original specialists degraded: True

--- Seed 2/2 ---

  Phase 1: Training on original regimes...
Training CSE with 8 agents, 3 regimes, 20 generations
  Gen 10/20: Coverage = 100%
  Gen 20/20: Coverage = 100%

  Phase 2: Introducing 'knowledge' regime...

  New regime specialist: Agent 1
  New regime wins: 2
  Original specialists degraded: True

============================================================
AGGREGATED RESULTS
============================================================
Adaptation success rate: 0%
Original degradation rate: 100%

============================================================
VERDICT
============================================================
❌ TEST FAILED: CSE does not adapt well
Result saved to /Users/yuhaoli/code/MAS_For_Finance/emergent_prompt_evolution/v2/experiments/practical_value/results/test_05_adaptability_20260114_194305.json

<<< test_05_adaptability: ❌ FAILED (108.6s)

>>> Running test_06_distribution_shift...
============================================================
TEST 6: Distribution Shift Robustness
============================================================

--- Seed 1/2 ---
Training CSE with 10 agents, 5 regimes, 30 generations
  Gen 10/30: Coverage = 100%
  Gen 20/30: Coverage = 100%
  Gen 30/30: Coverage = 100%
  uniform: 100.0%
  math_heavy: 100.0%
  code_heavy: 100.0%

--- Seed 2/2 ---
Training CSE with 10 agents, 5 regimes, 30 generations
  Gen 10/30: Coverage = 100%
  Gen 20/30: Coverage = 100%
  Gen 30/30: Coverage = 100%
  uniform: 100.0%
  math_heavy: 100.0%
  code_heavy: 100.0%

============================================================
AGGREGATED RESULTS
============================================================
uniform: 100.0% ± 0.0%
math_heavy: 100.0% ± 0.0%
code_heavy: 100.0% ± 0.0%

Worst-case degradation under shift: 0.0%

============================================================
VERDICT
============================================================
✅ TEST PASSED: CSE handles distribution shift well!
Result saved to /Users/yuhaoli/code/MAS_For_Finance/emergent_prompt_evolution/v2/experiments/practical_value/results/test_06_distribution_shift_20260114_194524.json

<<< test_06_distribution_shift: ✅ PASSED (139.1s)

>>> Running test_08_interpretability...
============================================================
TEST 8: Interpretability / Auditability
============================================================

--- Seed 1/2 ---
Training CSE with 10 agents, 5 regimes, 30 generations
  Gen 10/30: Coverage = 100%
  Gen 20/30: Coverage = 100%
  Gen 30/30: Coverage = 100%
  math: Agent 3 - Identified correctly: True
  code: Agent 5 - Identified correctly: True
  reasoning: Agent 2 - Identified correctly: True
  knowledge: Agent 8 - Identified correctly: True
  creative: Agent 5 - Identified correctly: True

--- Seed 2/2 ---
Training CSE with 10 agents, 5 regimes, 30 generations
  Gen 10/30: Coverage = 100%
  Gen 20/30: Coverage = 100%
  Gen 30/30: Coverage = 100%
  math: Agent 3 - Identified correctly: True
  code: Agent 5 - Identified correctly: True
  reasoning: Agent 2 - Identified correctly: True
  knowledge: Agent 8 - Identified correctly: True
  creative: Agent 5 - Identified correctly: True

============================================================
AGGREGATED RESULTS
============================================================
Identification accuracy: 100%

============================================================
VERDICT
============================================================
✅ TEST PASSED: Specialists are interpretable!
Result saved to /Users/yuhaoli/code/MAS_For_Finance/emergent_prompt_evolution/v2/experiments/practical_value/results/test_08_interpretability_20260114_194650.json

<<< test_08_interpretability: ✅ PASSED (85.5s)

>>> Running test_09_modular_updates...
============================================================
TEST 9: Modular Updates
============================================================

--- Seed 1/2 ---
Training CSE with 8 agents, 5 regimes, 25 generations
