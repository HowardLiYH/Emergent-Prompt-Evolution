API key found (not displayed for security)
/Users/yuhaoli/code/MAS_For_Finance/emergent_prompt_evolution/v2/experiments/practical_value/test_runner.py:26: FutureWarning: 

All support for the `google.generativeai` package has ended. It will no longer be receiving 
updates or bug fixes. Please switch to the `google.genai` package as soon as possible.
See README for more details:

https://github.com/google-gemini/deprecated-generative-ai-python/blob/main/README.md

  import google.generativeai as genai
================================================================================
PRACTICAL VALUE TEST SUITE
================================================================================
Started: 2026-01-14T19:09:40.285005
Using REAL Gemini API - All data is genuine

================================================================================
PHASE: Phase 1: Critical Foundation
================================================================================

>>> Running test_01_specialist_accuracy...
============================================================
TEST 1: Specialist Accuracy Advantage
============================================================

--- Seed 1/3 ---
Training CSE with 10 agents, 5 regimes, 30 generations
  Gen 10/30: Coverage = 100%
  Gen 20/30: Coverage = 100%
  Gen 30/30: Coverage = 100%

  Testing regime: math
    Specialist (Agent 3): 100.0%
    Generalist (Agent 6): 100.0%
    Advantage: +0.0%

  Testing regime: code
    Specialist (Agent 5): 100.0%
    Generalist (Agent 9): 100.0%
    Advantage: +0.0%

  Testing regime: reasoning
    Specialist (Agent 2): 90.0%
    Generalist (Agent 9): 90.0%
    Advantage: +0.0%

  Testing regime: knowledge
    Specialist (Agent 8): 90.0%
    Generalist (Agent 9): 90.0%
    Advantage: +0.0%

  Testing regime: creative
    Specialist (Agent 5): 90.0%
    Generalist (Agent 9): 90.0%
    Advantage: +0.0%

--- Seed 2/3 ---
Training CSE with 10 agents, 5 regimes, 30 generations
  Gen 10/30: Coverage = 100%
  Gen 20/30: Coverage = 100%
  Gen 30/30: Coverage = 100%

  Testing regime: math
    Specialist (Agent 3): 100.0%
    Generalist (Agent 6): 100.0%
    Advantage: +0.0%

  Testing regime: code
    Specialist (Agent 5): 100.0%
    Generalist (Agent 1): 100.0%
    Advantage: +0.0%

  Testing regime: reasoning
    Specialist (Agent 2): 90.0%
    Generalist (Agent 1): 90.0%
    Advantage: +0.0%

  Testing regime: knowledge
    Specialist (Agent 8): 90.0%
    Generalist (Agent 1): 90.0%
    Advantage: +0.0%

  Testing regime: creative
    Specialist (Agent 5): 90.0%
    Generalist (Agent 1): 90.0%
    Advantage: +0.0%

--- Seed 3/3 ---
Training CSE with 10 agents, 5 regimes, 30 generations
  Gen 10/30: Coverage = 100%
  Gen 20/30: Coverage = 100%
  Gen 30/30: Coverage = 100%

  Testing regime: math
    Specialist (Agent 3): 100.0%
    Generalist (Agent 6): 100.0%
    Advantage: +0.0%

  Testing regime: code
    Specialist (Agent 5): 100.0%
    Generalist (Agent 4): 100.0%
    Advantage: +0.0%

  Testing regime: reasoning
    Specialist (Agent 2): 90.0%
    Generalist (Agent 5): 90.0%
    Advantage: +0.0%

  Testing regime: knowledge
    Specialist (Agent 8): 90.0%
    Generalist (Agent 4): 90.0%
    Advantage: +0.0%

  Testing regime: creative
    Specialist (Agent 5): 90.0%
    Generalist (Agent 4): 90.0%
    Advantage: +0.0%

============================================================
AGGREGATED RESULTS
============================================================

math:
  Mean advantage: +0.0% ± 0.0%
  p-value: nan
  Specialist wins: NO

code:
  Mean advantage: +0.0% ± 0.0%
  p-value: nan
  Specialist wins: NO

reasoning:
  Mean advantage: +0.0% ± 0.0%
  p-value: nan
  Specialist wins: NO

knowledge:
  Mean advantage: +0.0% ± 0.0%
  p-value: nan
  Specialist wins: NO

creative:
  Mean advantage: +0.0% ± 0.0%
  p-value: nan
  Specialist wins: NO

============================================================
VERDICT
============================================================
Overall mean advantage: +0.0%
Regimes where specialist wins: 0/5

❌ TEST FAILED: Specialists do NOT consistently outperform generalists
   This is a CRITICAL failure - CSE may not have practical value

<<< test_01_specialist_accuracy: ⚠️ ERROR: Object of type bool is not JSON serializable

>>> Running test_02_automatic_routing...
============================================================
TEST 2: Automatic Task Routing
============================================================

--- Seed 1/3 ---
  Router trained on 100 competition rounds
  Regime patterns learned: ['knowledge', 'reasoning', 'math', 'code', 'creative']
  math: 13.3% routing accuracy
  code: 66.7% routing accuracy
  reasoning: 20.0% routing accuracy
  knowledge: 73.3% routing accuracy
  creative: 13.3% routing accuracy

  Overall routing accuracy: 37.3%
  Random baseline: 20.0%
  Improvement over random: 1.9x

--- Seed 2/3 ---
  Router trained on 100 competition rounds
  Regime patterns learned: ['code', 'math', 'reasoning', 'creative', 'knowledge']
  math: 66.7% routing accuracy
  code: 66.7% routing accuracy
  reasoning: 13.3% routing accuracy
  knowledge: 66.7% routing accuracy
  creative: 13.3% routing accuracy

  Overall routing accuracy: 45.3%
  Random baseline: 20.0%
  Improvement over random: 2.3x

--- Seed 3/3 ---
  Router trained on 100 competition rounds
  Regime patterns learned: ['math', 'reasoning', 'creative', 'code', 'knowledge']
  math: 66.7% routing accuracy
  code: 66.7% routing accuracy
  reasoning: 20.0% routing accuracy
  knowledge: 66.7% routing accuracy
  creative: 26.7% routing accuracy

  Overall routing accuracy: 49.3%
  Random baseline: 20.0%
  Improvement over random: 2.5x

============================================================
AGGREGATED RESULTS
============================================================
Mean routing accuracy: 44.0% ± 5.0%
Random baseline: 20.0%
Improvement factor: 2.2x

============================================================
VERDICT
============================================================
❌ TEST FAILED: Router does not work well enough
   Only 44.0% accuracy (2.2x random)

<<< test_02_automatic_routing: ⚠️ ERROR: Object of type bool is not JSON serializable

================================================================================
PHASE: Phase 2: Quick Wins
================================================================================

>>> Running test_07_parallel_training...
============================================================
TEST 7: Parallelizable Training
============================================================

--- Testing with 1 workers ---
  Wall clock: 19.22s
  Time per generation: 1.281s

--- Testing with 2 workers ---
  Wall clock: 11.84s
  Time per generation: 0.790s

--- Testing with 4 workers ---
  Wall clock: 6.78s
  Time per generation: 0.452s

--- Testing with 8 workers ---
  Wall clock: 6.71s
  Time per generation: 0.447s

============================================================
SPEEDUP ANALYSIS
============================================================
1 workers: 19.22s, speedup=1.00x, efficiency=100%
2 workers: 11.84s, speedup=1.62x, efficiency=81%
4 workers: 6.78s, speedup=2.83x, efficiency=71%
8 workers: 6.71s, speedup=2.87x, efficiency=36%

============================================================
VERDICT
============================================================
✅ TEST PASSED: Parallel training works!
   8 workers: 2.9x speedup, 36% efficiency
Result saved to /Users/yuhaoli/code/MAS_For_Finance/emergent_prompt_evolution/v2/experiments/practical_value/results/test_07_parallel_training_20260114_191426.json

<<< test_07_parallel_training: ✅ PASSED (44.6s)

>>> Running test_10_graceful_degradation...
============================================================
TEST 10: Graceful Degradation
============================================================

--- Seed 1/2 ---
Training CSE with 10 agents, 5 regimes, 30 generations
  Gen 10/30: Coverage = 100%
  Gen 20/30: Coverage = 100%
  Gen 30/30: Coverage = 100%

  Evaluating full system...
    math: 100.0%
    code: 100.0%
    reasoning: 90.0%
    knowledge: 90.0%
    creative: 90.0%

  Removed math specialist (Agent 3):
    Full: 100.0% → Reduced: 100.0%
    Degradation: +0.0%

  Removed code specialist (Agent 5):
    Full: 100.0% → Reduced: 100.0%
    Degradation: +0.0%

  Removed reasoning specialist (Agent 2):
    Full: 90.0% → Reduced: 90.0%
    Degradation: +0.0%

  Removed knowledge specialist (Agent 8):
    Full: 90.0% → Reduced: 90.0%
    Degradation: +0.0%

  Removed creative specialist (Agent 5):
    Full: 90.0% → Reduced: 90.0%
    Degradation: +0.0%

--- Seed 2/2 ---
Training CSE with 10 agents, 5 regimes, 30 generations
  Gen 10/30: Coverage = 100%
  Gen 20/30: Coverage = 100%
  Gen 30/30: Coverage = 100%

  Evaluating full system...
    math: 100.0%
    code: 100.0%
    reasoning: 90.0%
    knowledge: 90.0%
    creative: 90.0%

  Removed math specialist (Agent 3):
    Full: 100.0% → Reduced: 100.0%
    Degradation: +0.0%

  Removed code specialist (Agent 5):
    Full: 100.0% → Reduced: 100.0%
    Degradation: +0.0%

  Removed reasoning specialist (Agent 2):
    Full: 90.0% → Reduced: 90.0%
    Degradation: +0.0%

  Removed knowledge specialist (Agent 8):
    Full: 90.0% → Reduced: 90.0%
    Degradation: +0.0%

  Removed creative specialist (Agent 5):
    Full: 90.0% → Reduced: 90.0%
    Degradation: +0.0%

============================================================
AGGREGATED RESULTS
============================================================
math:
  Mean degradation: +0.0%
  Fallback quality: 100.0%
code:
  Mean degradation: +0.0%
  Fallback quality: 100.0%
reasoning:
  Mean degradation: +0.0%
  Fallback quality: 90.0%
knowledge:
  Mean degradation: +0.0%
  Fallback quality: 90.0%
creative:
  Mean degradation: +0.0%
  Fallback quality: 90.0%

============================================================
VERDICT
============================================================
Worst-case degradation: 0.0%
Minimum fallback quality: 90.0%

✅ TEST PASSED: System degrades gracefully!

<<< test_10_graceful_degradation: ⚠️ ERROR: Object of type bool is not JSON serializable

>>> Running test_14_collision_coverage...
============================================================
TEST 14: Collision-Free Coverage
============================================================

--- Seed 1/3 ---
Training CSE with 10 agents, 5 regimes, 40 generations
  Gen 10/40: Coverage = 100%
  Gen 20/40: Coverage = 100%
  Gen 30/40: Coverage = 100%
  Gen 40/40: Coverage = 100%

  Specialist distribution:
    knowledge: [0, 8] ⚠️ COLLISION
    code: [1] ✓
    reasoning: [2, 5] ⚠️ COLLISION
    math: [3, 4, 6, 9] ⚠️ COLLISION
    creative: [7] ✓

  Coverage: 100% (5/5)
  Collision rate: 60% (3 collisions)

--- Seed 2/3 ---
Training CSE with 10 agents, 5 regimes, 40 generations
  Gen 10/40: Coverage = 100%
  Gen 20/40: Coverage = 100%
  Gen 30/40: Coverage = 100%
  Gen 40/40: Coverage = 100%

  Specialist distribution:
    knowledge: [0, 8] ⚠️ COLLISION
    code: [1] ✓
    reasoning: [2, 5] ⚠️ COLLISION
    math: [3, 4, 6, 9] ⚠️ COLLISION
    creative: [7] ✓

  Coverage: 100% (5/5)
  Collision rate: 60% (3 collisions)

--- Seed 3/3 ---
Training CSE with 10 agents, 5 regimes, 40 generations
  Gen 10/40: Coverage = 100%
  Gen 20/40: Coverage = 100%
  Gen 30/40: Coverage = 100%
  Gen 40/40: Coverage = 100%

  Specialist distribution:
    knowledge: [0, 8] ⚠️ COLLISION
    code: [1] ✓
    reasoning: [2, 5] ⚠️ COLLISION
    math: [3, 4, 6, 9] ⚠️ COLLISION
    creative: [7] ✓

  Coverage: 100% (5/5)
  Collision rate: 60% (3 collisions)

============================================================
AGGREGATED RESULTS
============================================================
Mean coverage: 100%
Mean collision rate: 60%

============================================================
VERDICT
============================================================
❌ TEST FAILED: Coverage or collision issues
   100% coverage with 60% collision rate

<<< test_14_collision_coverage: ⚠️ ERROR: Object of type bool is not JSON serializable

>>> Running test_17_inference_latency...
============================================================
TEST 17: Real-Time Inference Latency
============================================================

Training population...
Training CSE with 10 agents, 5 regimes, 30 generations
  Gen 10/30: Coverage = 100%
  Gen 20/30: Coverage = 100%
  Gen 30/30: Coverage = 100%

Measuring latency on 20 requests...
  Completed 10/20
  Completed 20/20

============================================================
LATENCY ANALYSIS
============================================================

CSE (Router + Specialist):
  P50: 570.5ms
  P95: 620.4ms
  P99: 629.3ms

Single Model:
  P50: 581.7ms
  P95: 662.2ms
  P99: 705.7ms

Routing Overhead:
  P50: 0.019ms
  P95: 0.067ms

Mean overhead: -0.3ms
Overhead ratio: 1.00x

============================================================
VERDICT
============================================================
✅ TEST PASSED: Inference latency is acceptable!
   Routing: 0.0ms, Overhead: 1.00x

<<< test_17_inference_latency: ⚠️ ERROR: Object of type bool is not JSON serializable

================================================================================
FINAL SUMMARY
================================================================================
Tests Passed: 1/6 (17%)

Report saved to: /Users/yuhaoli/code/MAS_For_Finance/emergent_prompt_evolution/v2/experiments/practical_value/results/PRACTICAL_VALUE_REPORT.md
Raw results saved to: /Users/yuhaoli/code/MAS_For_Finance/emergent_prompt_evolution/v2/experiments/practical_value/results/all_results.json

❌ MOST TESTS FAILED - Need to pivot strategy
